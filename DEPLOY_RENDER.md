# Deploy to Render (Quick Start)

This repo now includes a `render.yaml` blueprint and production WSGI entrypoint.

## 1) Push this repo to GitHub

Render deploys from GitHub, so first make sure your latest code is pushed.

## 2) Create services from blueprint

1. In Render, click **New +** -> **Blueprint**.
2. Connect/select this GitHub repo.
3. Render will detect `render.yaml` and create:
   - `third-shot-app` (web service)
   - `third-shot-db` (PostgreSQL)
4. Click **Apply**.

## 3) Set required environment values

In the `third-shot-app` service settings, set/update these values:

- `SECRET_KEY` (auto-generated by blueprint)
- `DATABASE_URL` (auto-linked from Render Postgres)
- `FLASK_ENV=production`
- `CORS_ALLOWED_ORIGINS` -> set to your live domain (for example: `https://yourdomain.com`)
- `GOOGLE_CLIENT_ID` (if using Google sign-in)
- `ADMIN_EMAILS` (comma-separated, optional)
- `COURT_UPDATE_REVIEWER_EMAILS` (comma-separated, optional)
- `COURT_UPDATE_REVIEWER_USERNAMES` (comma-separated, optional)

`AUTO_SEED_COURTS=true` is enabled so the first boot can populate initial courts.

## 4) Deploy

Trigger deploy (or let auto-deploy run). The start command is:

`gunicorn --workers 1 --threads 8 --bind 0.0.0.0:$PORT backend.wsgi:app`

## 5) After first successful deploy

- Open your Render URL and verify:
  - Home page loads
  - API endpoints under `/api/*` work
  - Realtime chat/presence features connect
- Tighten CORS by setting only your real domain in `CORS_ALLOWED_ORIGINS`.
- If using Google login, update authorized JavaScript origins in Google Cloud Console to include your Render/custom domain.

## Notes

- Production uses PostgreSQL on Render, not local SQLite.
- Schema creation is currently handled by app startup (`db.create_all()`).
- If you scale to multiple web instances later, add Redis and Socket.IO message queue support.
